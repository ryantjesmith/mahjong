module.exports=function(e){e.config(function(){}).run(function(e,n,o,t,a,r){e.$on("$viewContentLoaded",function(){n.removeAll()}),e.$on("$stateChangeStart",function(e,n){if("login"!==n.name){if(void 0===t.username||null===t.username){var u=r.search();void 0!==u.username?""!=u.username&&""!=u.token&&(a.setUser(u.username,u.token),e.preventDefault(),o.go(n)):(e.preventDefault(),o.go("login"))}}else void 0!==t.username&&(e.preventDefault(),o.go("dashboard"))})})};