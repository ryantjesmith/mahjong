module.exports=function(e,o,n,a,t){function s(e){o.message=e,$(".popup_message").addClass("flash_popup"),t(function(){$(".popup_message").removeClass("flash_popup")},3e3)}var r=o;r.game=[],r.currentUser=n.getUser(),e.getCurrentGame(a.gameId,{onSuccess:function(e){r.game=e.data,"playing"==r.game.state&&r.loadGame(r.game),console.log(r.game)},onError:function(e){console.log(e)}}),r.startGame=function(o){return o.players.length<o.minPlayers?(s("You need more people to start the game!"),void 0):"open"!=o.state?(s("This game is already started!"),void 0):(e.startGame(o._id,{onSuccess:function(e){s("Game started!"),console.log(e)},onError:function(e){s("Woops! Something went wrong"),console.log(e)}}),void 0)},r.loadGame=function(e){r.getGameTiles(e._id)},r.getGameTiles=function(o){e.getGameTiles(o,{onSuccess:function(e){r.tiles=e.data,console.log(e.data)},onError:function(e){console.log(e)}})}};