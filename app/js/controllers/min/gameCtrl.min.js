module.exports=function(o,e,n,a,s,t){function r(o){e.message=o,$(".popup_message").addClass("flash_popup"),t(function(){$(".popup_message").removeClass("flash_popup")},3e3)}var l=e;l.game=[],l.currentUser=n.getUser(),o.getCurrentGame(a.gameId,{onSuccess:function(o){l.game=o.data,"playing"==l.game.state&&l.loadGame(l.game),console.log(l.game)},onError:function(o){console.log(o)}}),l.startGame=function(e){return e.players.length<e.minPlayers?(r("You need more people to start the game!"),void 0):"open"!=e.state?(r("This game is already started!"),void 0):(o.startGame(e._id,{onSuccess:function(o){r("Game started!"),console.log(o)},onError:function(o){r("Woops! Something went wrong"),console.log(o)}}),void 0)},l.loadGame=function(o){l.getGameTiles(o._id)},l.removeGame=function(e){o.removeGame(e._id,{onSuccess:function(o){s.go("dashboard"),console.log(o)},onError:function(o){r("Woops! Something went wrong"),console.log(o)}})},l.getGameTiles=function(e){o.getGameTiles(e,{onSuccess:function(o){l.tiles=o.data,console.log(o.data)},onError:function(o){console.log(o)}})}};